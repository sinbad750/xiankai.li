   1                     ; C Compiler for STM8 (COSMIC Software)
   2                     ; Parser V4.8.32 - 23 Mar 2010
   3                     ; Generator V4.3.4 - 23 Mar 2010
   4                     ; Optimizer V4.3.3 - 10 Feb 2010
  18                     .const:	section	.text
  19  0000               L3_ak77dspCRAM:
  20  0000 b4            	dc.b	180
  21  0001 00            	dc.b	0
  22  0002 00            	dc.b	0
  23  0003 20            	dc.b	32
  24  0004 00            	dc.b	0
  25  0005 00            	dc.b	0
  26  0006 7f            	dc.b	127
  27  0007 fc            	dc.b	252
  28  0008 00            	dc.b	0
  29  0009 4b            	dc.b	75
  30  000a 24            	dc.b	36
  31  000b 00            	dc.b	0
  32  000c 7f            	dc.b	127
  33  000d ff            	dc.b	255
  34  000e 00            	dc.b	0
  35  000f 54            	dc.b	84
  36  0010 4f            	dc.b	79
  37  0011 00            	dc.b	0
  38  0012 00            	dc.b	0
  39  0013 00            	dc.b	0
  40  0014 00            	dc.b	0
  41  0015 78            	dc.b	120
  42  0016 00            	dc.b	0
  43  0017 00            	dc.b	0
  44  0018 7f            	dc.b	127
  45  0019 d2            	dc.b	210
  46  001a 00            	dc.b	0
  47  001b 46            	dc.b	70
  48  001c a8            	dc.b	168
  49  001d 00            	dc.b	0
  50  001e 00            	dc.b	0
  51  001f 00            	dc.b	0
  52  0020 00            	dc.b	0
  53  0021 7d            	dc.b	125
  54  0022 63            	dc.b	99
  55  0023 00            	dc.b	0
  56  0024 21            	dc.b	33
  57  0025 f6            	dc.b	246
  58  0026 00            	dc.b	0
  59  0027 7f            	dc.b	127
  60  0028 bb            	dc.b	187
  61  0029 00            	dc.b	0
  62  002a 70            	dc.b	112
  63  002b 09            	dc.b	9
  64  002c 00            	dc.b	0
  65  002d               L5_ak77dspORAM:
  66  002d b2            	dc.b	178
  67  002e 00            	dc.b	0
  68  002f 00            	dc.b	0
 109                     	switch	.const
 110  0030               _akm_init_config_data:
 111  0030 c0            	dc.b	192
 112  0031 3d            	dc.b	61
 113  0032 c1            	dc.b	193
 114  0033 00            	dc.b	0
 115  0034 c2            	dc.b	194
 116  0035 10            	dc.b	16
 117  0036 c3            	dc.b	195
 118  0037 02            	dc.b	2
 119  0038 c4            	dc.b	196
 120  0039 40            	dc.b	64
 121  003a c5            	dc.b	197
 122  003b 00            	dc.b	0
 123  003c c6            	dc.b	198
 124  003d 00            	dc.b	0
 125  003e c7            	dc.b	199
 126  003f 00            	dc.b	0
 127  0040 c8            	dc.b	200
 128  0041 00            	dc.b	0
 129  0042 c9            	dc.b	201
 130  0043 00            	dc.b	0
 131  0044 ca            	dc.b	202
 132  0045 e1            	dc.b	225
 133  0046 cb            	dc.b	203
 134  0047 00            	dc.b	0
 135  0048 cc            	dc.b	204
 136  0049 00            	dc.b	0
 137  004a cd            	dc.b	205
 138  004b 00            	dc.b	0
 139  004c ce            	dc.b	206
 140  004d ff            	dc.b	255
 141  004e cf            	dc.b	207
 142  004f 30            	dc.b	48
 143  0050 d0            	dc.b	208
 144  0051 20            	dc.b	32
 145  0052 d1            	dc.b	209
 146  0053 00            	dc.b	0
 147  0054 d2            	dc.b	210
 148  0055 00            	dc.b	0
 149  0056 d3            	dc.b	211
 150  0057 00            	dc.b	0
 151  0058 d4            	dc.b	212
 152  0059 ff            	dc.b	255
 153  005a d5            	dc.b	213
 154  005b 30            	dc.b	48
 155  005c d6            	dc.b	214
 156  005d 30            	dc.b	48
 157  005e d7            	dc.b	215
 158  005f 30            	dc.b	48
 159  0060 d8            	dc.b	216
 160  0061 1c            	dc.b	28
 161  0062 d9            	dc.b	217
 162  0063 1c            	dc.b	28
 163  0064 da            	dc.b	218
 164  0065 00            	dc.b	0
 165  0066 db            	dc.b	219
 166  0067 00            	dc.b	0
 167  0068 cf            	dc.b	207
 168  0069 31            	dc.b	49
 169                     .fconst:	section	.text
 170  0000               f_ak77dspPRAM:
 171  0000 b8            	dc.b	184
 172  0001 00            	dc.b	0
 173  0002 00            	dc.b	0
 174  0003 0c            	dc.b	12
 175  0004 94            	dc.b	148
 176  0005 ed            	dc.b	237
 177  0006 1e            	dc.b	30
 178  0007 74            	dc.b	116
 179  0008 04            	dc.b	4
 180  0009 a9            	dc.b	169
 181  000a 1c            	dc.b	28
 182  000b 6d            	dc.b	109
 183  000c 55            	dc.b	85
 184  000d 00            	dc.b	0
 185  000e 44            	dc.b	68
 186  000f 02            	dc.b	2
 187  0010 11            	dc.b	17
 188  0011 99            	dc.b	153
 189  0012 09            	dc.b	9
 190  0013 58            	dc.b	88
 191  0014 6f            	dc.b	111
 192  0015 4d            	dc.b	77
 193  0016 d0            	dc.b	208
 194  0017 01            	dc.b	1
 195  0018 5a            	dc.b	90
 196  0019 7c            	dc.b	124
 197  001a c9            	dc.b	201
 198  001b 27            	dc.b	39
 199  001c 09            	dc.b	9
 200  001d 35            	dc.b	53
 201  001e 31            	dc.b	49
 202  001f 01            	dc.b	1
 203  0020 86            	dc.b	134
 204  0021 03            	dc.b	3
 205  0022 4b            	dc.b	75
 206  0023 fa            	dc.b	250
 207  0024 2c            	dc.b	44
 208  0025 60            	dc.b	96
 209  0026 0a            	dc.b	10
 210  0027 78            	dc.b	120
 211  0028 fb            	dc.b	251
 212  0029 60            	dc.b	96
 213  002a c8            	dc.b	200
 214  002b 04            	dc.b	4
 215  002c 82            	dc.b	130
 216  002d 17            	dc.b	23
 217  002e d7            	dc.b	215
 218  002f c0            	dc.b	192
 219  0030 0c            	dc.b	12
 220  0031 fb            	dc.b	251
 221  0032 32            	dc.b	50
 222  0033 83            	dc.b	131
 223  0034 6c            	dc.b	108
 224  0035 07            	dc.b	7
 225  0036 ae            	dc.b	174
 226  0037 a1            	dc.b	161
 227  0038 cb            	dc.b	203
 228  0039 72            	dc.b	114
 229  003a 0e            	dc.b	14
 230  003b d9            	dc.b	217
 231  003c a1            	dc.b	161
 232  003d d6            	dc.b	214
 233  003e 15            	dc.b	21
 234  003f 0a            	dc.b	10
 235  0040 7b            	dc.b	123
 236  0041 e5            	dc.b	229
 237  0042 66            	dc.b	102
 238  0043 49            	dc.b	73
 239  0044 08            	dc.b	8
 240  0045 59            	dc.b	89
 241  0046 5c            	dc.b	92
 242  0047 f9            	dc.b	249
 243  0048 b1            	dc.b	177
 244  0049 0e            	dc.b	14
 245  004a 38            	dc.b	56
 246  004b da            	dc.b	218
 247  004c f8            	dc.b	248
 248  004d 86            	dc.b	134
 249  004e 00            	dc.b	0
 250  004f 84            	dc.b	132
 251  0050 83            	dc.b	131
 252  0051 85            	dc.b	133
 253  0052 8a            	dc.b	138
 254  0053 04            	dc.b	4
 255  0054 de            	dc.b	222
 256  0055 90            	dc.b	144
 257  0056 15            	dc.b	21
 258  0057 c2            	dc.b	194
 259  0058 00            	dc.b	0
 260  0059 fd            	dc.b	253
 261  005a 96            	dc.b	150
 262  005b 5f            	dc.b	95
 263  005c 72            	dc.b	114
 264  005d 08            	dc.b	8
 265  005e 36            	dc.b	54
 266  005f 8b            	dc.b	139
 267  0060 1f            	dc.b	31
 268  0061 86            	dc.b	134
 269  0062 04            	dc.b	4
 270  0063 a4            	dc.b	164
 271  0064 9c            	dc.b	156
 272  0065 ed            	dc.b	237
 273  0066 ec            	dc.b	236
 274  0067 01            	dc.b	1
 275  0068 76            	dc.b	118
 276  0069 e5            	dc.b	229
 277  006a a9            	dc.b	169
 278  006b 8a            	dc.b	138
 279  006c 05            	dc.b	5
 280  006d 16            	dc.b	22
 281  006e 0a            	dc.b	10
 282  006f 85            	dc.b	133
 283  0070 f9            	dc.b	249
 284  0071 02            	dc.b	2
 285  0072 ee            	dc.b	238
 286  0073 07            	dc.b	7
 287  0074 bc            	dc.b	188
 288  0075 45            	dc.b	69
 289  0076 0d            	dc.b	13
 290  0077 44            	dc.b	68
 291  0078 82            	dc.b	130
 292  0079 76            	dc.b	118
 293  007a 37            	dc.b	55
 294  007b 03            	dc.b	3
 295  007c 43            	dc.b	67
 296  007d bb            	dc.b	187
 297  007e 3b            	dc.b	59
 298  007f bf            	dc.b	191
 299  0080 07            	dc.b	7
 300  0081 c5            	dc.b	197
 301  0082 cd            	dc.b	205
 302  0083 04            	dc.b	4
 303  0084 19            	dc.b	25
 304  0085 04            	dc.b	4
 305  0086 79            	dc.b	121
 306  0087 f3            	dc.b	243
 307  0088 64            	dc.b	100
 308  0089 94            	dc.b	148
 309  008a 01            	dc.b	1
 310  008b b5            	dc.b	181
 311  008c 71            	dc.b	113
 312  008d 37            	dc.b	55
 313  008e a2            	dc.b	162
 314  008f 04            	dc.b	4
 315  0090 46            	dc.b	70
 316  0091 13            	dc.b	19
 317  0092 55            	dc.b	85
 318  0093 69            	dc.b	105
 319  0094 0d            	dc.b	13
 320  0095 37            	dc.b	55
 321  0096 22            	dc.b	34
 322  0097 85            	dc.b	133
 323  0098 69            	dc.b	105
 324  0099 0b            	dc.b	11
 325  009a 24            	dc.b	36
 326  009b b7            	dc.b	183
 327  009c e6            	dc.b	230
 328  009d 64            	dc.b	100
 329  009e 00            	dc.b	0
 330  009f 06            	dc.b	6
 331  00a0 33            	dc.b	51
 332  00a1 8d            	dc.b	141
 333  00a2 27            	dc.b	39
 334  00a3 08            	dc.b	8
 335  00a4 b1            	dc.b	177
 336  00a5 d6            	dc.b	214
 337  00a6 59            	dc.b	89
 338  00a7 e3            	dc.b	227
 339  00a8 0e            	dc.b	14
 340  00a9 83            	dc.b	131
 341  00aa 5b            	dc.b	91
 342  00ab 74            	dc.b	116
 343  00ac ba            	dc.b	186
 344  00ad 03            	dc.b	3
 345  00ae 55            	dc.b	85
 346  00af 03            	dc.b	3
 347  00b0 d5            	dc.b	213
 348  00b1 ed            	dc.b	237
 349  00b2 04            	dc.b	4
 350  00b3 06            	dc.b	6
 351  00b4 f4            	dc.b	244
 352  00b5 12            	dc.b	18
 353  00b6 b0            	dc.b	176
 354  00b7 01            	dc.b	1
 355  00b8 05            	dc.b	5
 356  00b9 61            	dc.b	97
 357  00ba 77            	dc.b	119
 358  00bb 2c            	dc.b	44
 359  00bc 07            	dc.b	7
 360  00bd 78            	dc.b	120
 361  00be 7f            	dc.b	127
 362  00bf c1            	dc.b	193
 363  00c0 38            	dc.b	56
 364  00c1 03            	dc.b	3
 365  00c2 b1            	dc.b	177
 366  00c3 80            	dc.b	128
 367  00c4 23            	dc.b	35
 368  00c5 68            	dc.b	104
 369  00c6 03            	dc.b	3
 370  00c7 e5            	dc.b	229
 371  00c8 45            	dc.b	69
 372  00c9 48            	dc.b	72
 373  00ca e3            	dc.b	227
 374  00cb 06            	dc.b	6
 375  00cc c6            	dc.b	198
 376  00cd 62            	dc.b	98
 377  00ce 20            	dc.b	32
 378  00cf 07            	dc.b	7
 379  00d0 00            	dc.b	0
 380  00d1 38            	dc.b	56
 381  00d2 d5            	dc.b	213
 382  00d3 3f            	dc.b	63
 383  00d4 48            	dc.b	72
 384  00d5 06            	dc.b	6
 385  00d6 c5            	dc.b	197
 386  00d7 aa            	dc.b	170
 387  00d8 51            	dc.b	81
 388  00d9 76            	dc.b	118
 389  00da 01            	dc.b	1
 390  00db ed            	dc.b	237
 391  00dc e9            	dc.b	233
 392  00dd ad            	dc.b	173
 393  00de 98            	dc.b	152
 394  00df 0c            	dc.b	12
 395  00e0 65            	dc.b	101
 396  00e1 1e            	dc.b	30
 397  00e2 5f            	dc.b	95
 398  00e3 d1            	dc.b	209
 399  00e4 01            	dc.b	1
 400  00e5 ac            	dc.b	172
 401  00e6 b7            	dc.b	183
 402  00e7 c3            	dc.b	195
 403  00e8 9d            	dc.b	157
 404  00e9 04            	dc.b	4
 405  00ea b6            	dc.b	182
 406  00eb ec            	dc.b	236
 407  00ec 12            	dc.b	18
 408  00ed fe            	dc.b	254
 409  00ee 0b            	dc.b	11
 410  00ef 04            	dc.b	4
 411  00f0 ab            	dc.b	171
 412  00f1 cb            	dc.b	203
 413  00f2 b8            	dc.b	184
 414  00f3 0d            	dc.b	13
 415  00f4 d0            	dc.b	208
 416  00f5 fd            	dc.b	253
 417  00f6 75            	dc.b	117
 418  00f7 12            	dc.b	18
 419  00f8 05            	dc.b	5
 420  00f9 c2            	dc.b	194
 421  00fa f5            	dc.b	245
 422  00fb cd            	dc.b	205
 423  00fc 10            	dc.b	16
 424  00fd 00            	dc.b	0
 425  00fe ff            	dc.b	255
 426  00ff 83            	dc.b	131
 427  0100 db            	dc.b	219
 428  0101 9d            	dc.b	157
 429  0102 0a            	dc.b	10
 430  0103 8b            	dc.b	139
 431  0104 0a            	dc.b	10
 432  0105 51            	dc.b	81
 433  0106 27            	dc.b	39
 434  0107 07            	dc.b	7
 435  0108 8a            	dc.b	138
 436  0109 8a            	dc.b	138
 437  010a c6            	dc.b	198
 438  010b dd            	dc.b	221
 439  010c 04            	dc.b	4
 440  010d c4            	dc.b	196
 441  010e 40            	dc.b	64
 442  010f 21            	dc.b	33
 443  0110 2a            	dc.b	42
 444  0111 06            	dc.b	6
 445  0112 d5            	dc.b	213
 446  0113 2e            	dc.b	46
 447  0114 f6            	dc.b	246
 448  0115 5c            	dc.b	92
 449  0116 02            	dc.b	2
 450  0117 97            	dc.b	151
 451  0118 87            	dc.b	135
 452  0119 e0            	dc.b	224
 453  011a 12            	dc.b	18
 454  011b 05            	dc.b	5
 455  011c 93            	dc.b	147
 456  011d 4e            	dc.b	78
 457  011e b0            	dc.b	176
 458  011f 10            	dc.b	16
 459  0120 0a            	dc.b	10
 460  0121 b7            	dc.b	183
 461  0122 9f            	dc.b	159
 462  0123 a2            	dc.b	162
 463  0124 c7            	dc.b	199
 464  0125 05            	dc.b	5
 465  0126 67            	dc.b	103
 466  0127 8d            	dc.b	141
 467  0128 3a            	dc.b	58
 468  0129 13            	dc.b	19
 469  012a 05            	dc.b	5
 470  012b d8            	dc.b	216
 471  012c a9            	dc.b	169
 472  012d 71            	dc.b	113
 473  012e d4            	dc.b	212
 474  012f 08            	dc.b	8
 475  0130 57            	dc.b	87
 476  0131 9f            	dc.b	159
 477  0132 74            	dc.b	116
 478  0133 79            	dc.b	121
 479  0134 00            	dc.b	0
 480  0135 7a            	dc.b	122
 481  0136 ee            	dc.b	238
 482  0137 20            	dc.b	32
 483  0138 73            	dc.b	115
 484  0139 04            	dc.b	4
 485  013a 6c            	dc.b	108
 486  013b 1d            	dc.b	29
 487  013c 1d            	dc.b	29
 488  013d e1            	dc.b	225
 489  013e 0e            	dc.b	14
 490  013f be            	dc.b	190
 491  0140 59            	dc.b	89
 492  0141 2e            	dc.b	46
 493  0142 64            	dc.b	100
 494  0143 02            	dc.b	2
 495  0144 9d            	dc.b	157
 496  0145 a3            	dc.b	163
 497  0146 4f            	dc.b	79
 498  0147 9b            	dc.b	155
 499  0148 01            	dc.b	1
 500  0149 23            	dc.b	35
 501  014a 8c            	dc.b	140
 502  014b af            	dc.b	175
 503  014c 49            	dc.b	73
 504  014d 0c            	dc.b	12
 505  014e 80            	dc.b	128
 506  014f 43            	dc.b	67
 507  0150 34            	dc.b	52
 508  0151 5c            	dc.b	92
 509  0152 0b            	dc.b	11
 510  0153 0d            	dc.b	13
 511  0154 69            	dc.b	105
 512  0155 b9            	dc.b	185
 513  0156 14            	dc.b	20
 514  0157 0b            	dc.b	11
 515  0158 cf            	dc.b	207
 516  0159 79            	dc.b	121
 517  015a 21            	dc.b	33
 518  015b 75            	dc.b	117
 519  015c 06            	dc.b	6
 520  015d a6            	dc.b	166
 521  015e 60            	dc.b	96
 522  015f b1            	dc.b	177
 523  0160 94            	dc.b	148
 524  0161 09            	dc.b	9
 525  0162 7f            	dc.b	127
 526  0163 45            	dc.b	69
 527  0164 8a            	dc.b	138
 528  0165 83            	dc.b	131
 529  0166 0f            	dc.b	15
 530  0167 1f            	dc.b	31
 531  0168 74            	dc.b	116
 532  0169 1e            	dc.b	30
 533  016a a8            	dc.b	168
 534  016b 00            	dc.b	0
 535  016c 5a            	dc.b	90
 536  016d fb            	dc.b	251
 537  016e ae            	dc.b	174
 538  016f 1e            	dc.b	30
 539  0170 0f            	dc.b	15
 540  0171 2e            	dc.b	46
 541  0172 e0            	dc.b	224
 542  0173 75            	dc.b	117
 543  0174 ee            	dc.b	238
 544  0175 05            	dc.b	5
 545  0176 d4            	dc.b	212
 546  0177 48            	dc.b	72
 547  0178 e1            	dc.b	225
 548  0179 3b            	dc.b	59
 549  017a 0b            	dc.b	11
 550  017b 34            	dc.b	52
 551  017c 3b            	dc.b	59
 552  017d c5            	dc.b	197
 553  017e 8c            	dc.b	140
 554  017f 03            	dc.b	3
 555  0180 7c            	dc.b	124
 556  0181 5e            	dc.b	94
 557  0182 08            	dc.b	8
 558  0183 2d            	dc.b	45
 559  0184 07            	dc.b	7
 560  0185 47            	dc.b	71
 561  0186 9c            	dc.b	156
 562  0187 b6            	dc.b	182
 563  0188 22            	dc.b	34
 564  0189 0f            	dc.b	15
 565  018a 1b            	dc.b	27
 566  018b d7            	dc.b	215
 567  018c 11            	dc.b	17
 568  018d 91            	dc.b	145
 569  018e 00            	dc.b	0
 570  018f 84            	dc.b	132
 571  0190 61            	dc.b	97
 572  0191 39            	dc.b	57
 573  0192 56            	dc.b	86
 574  0193 0b            	dc.b	11
 575  0194 d3            	dc.b	211
 576  0195 72            	dc.b	114
 577  0196 2c            	dc.b	44
 578  0197 76            	dc.b	118
 579  0198 03            	dc.b	3
 580  0199 b2            	dc.b	178
 581  019a 48            	dc.b	72
 582  019b 3e            	dc.b	62
 583  019c 45            	dc.b	69
 584  019d 00            	dc.b	0
 585  019e c0            	dc.b	192
 586  019f 60            	dc.b	96
 587  01a0 a8            	dc.b	168
 588  01a1 da            	dc.b	218
 589  01a2 06            	dc.b	6
 590  01a3 8b            	dc.b	139
 591  01a4 9d            	dc.b	157
 592  01a5 67            	dc.b	103
 593  01a6 1e            	dc.b	30
 594  01a7 0e            	dc.b	14
 595  01a8 e8            	dc.b	232
 596  01a9 35            	dc.b	53
 597  01aa b7            	dc.b	183
 598  01ab 60            	dc.b	96
 599  01ac 05            	dc.b	5
 600  01ad f5            	dc.b	245
 601  01ae 50            	dc.b	80
 602  01af 2d            	dc.b	45
 603  01b0 7f            	dc.b	127
 604  01b1 02            	dc.b	2
 605  01b2 c0            	dc.b	192
 606  01b3 e7            	dc.b	231
 607  01b4 49            	dc.b	73
 608  01b5 eb            	dc.b	235
 640                     ; 255 void SPI_DSP_Init(void)
 640                     ; 256 {
 642                     	switch	.text
 643  0000               _SPI_DSP_Init:
 647                     ; 257  	SPI_DeInit();
 649  0000 cd0000        	call	_SPI_DeInit
 651                     ; 258 	SPI_Init(SPI_FIRSTBIT_MSB, SPI_BAUDRATEPRESCALER_256, SPI_MODE_MASTER, SPI_CLOCKPOLARITY_LOW, SPI_CLOCKPHASE_1EDGE, SPI_DATADIRECTION_2LINES_FULLDUPLEX, SPI_NSS_SOFT,(u8)0x07);
 653  0003 4b07          	push	#7
 654  0005 4b02          	push	#2
 655  0007 4b00          	push	#0
 656  0009 4b00          	push	#0
 657  000b 4b00          	push	#0
 658  000d 4b04          	push	#4
 659  000f ae0038        	ldw	x,#56
 660  0012 4f            	clr	a
 661  0013 95            	ld	xh,a
 662  0014 cd0000        	call	_SPI_Init
 664  0017 5b06          	addw	sp,#6
 665                     ; 259 	SPI_Cmd(ENABLE);
 667  0019 a601          	ld	a,#1
 669                     ; 260 }
 672  001b cc0000        	jp	_SPI_Cmd
 707                     ; 263 u8 SPI_DSP_SendByte(u8 byte)
 707                     ; 264 {
 708                     	switch	.text
 709  001e               _SPI_DSP_SendByte:
 711  001e 88            	push	a
 712       00000000      OFST:	set	0
 715  001f               L36:
 716                     ; 266   while(SPI_GetFlagStatus(SPI_FLAG_TXE) == RESET);
 718  001f a602          	ld	a,#2
 719  0021 cd0000        	call	_SPI_GetFlagStatus
 721  0024 4d            	tnz	a
 722  0025 27f8          	jreq	L36
 723                     ; 269   SPI_SendData( byte);
 725  0027 7b01          	ld	a,(OFST+1,sp)
 726  0029 cd0000        	call	_SPI_SendData
 729  002c               L17:
 730                     ; 272   while(SPI_GetFlagStatus( SPI_FLAG_RXNE) == RESET);
 732  002c a601          	ld	a,#1
 733  002e cd0000        	call	_SPI_GetFlagStatus
 735  0031 4d            	tnz	a
 736  0032 27f8          	jreq	L17
 737                     ; 275   return SPI_ReceiveData();
 739  0034 cd0000        	call	_SPI_ReceiveData
 743  0037 5b01          	addw	sp,#1
 744  0039 81            	ret	
 768                     ; 279 u8 SPI_DSP_ReadByte(void)
 768                     ; 280 {
 769                     	switch	.text
 770  003a               _SPI_DSP_ReadByte:
 774                     ; 281   return (SPI_DSP_SendByte(Dummy_Byte));
 776  003a a6a5          	ld	a,#165
 780  003c 20e0          	jp	_SPI_DSP_SendByte
 820                     ; 286 void Dsp_Send_N_FF(u16 num)
 820                     ; 287 {
 821                     	switch	.text
 822  003e               _Dsp_Send_N_FF:
 824  003e 89            	pushw	x
 825  003f 89            	pushw	x
 826       00000002      OFST:	set	2
 829                     ; 292  for(i=0;i<num;i++)
 831  0040 5f            	clrw	x
 833  0041 2007          	jra	L721
 834  0043               L321:
 835                     ; 294        SPI_DSP_SendByte(0xff);
 837  0043 a6ff          	ld	a,#255
 838  0045 add7          	call	_SPI_DSP_SendByte
 840                     ; 292  for(i=0;i<num;i++)
 842  0047 1e01          	ldw	x,(OFST-1,sp)
 843  0049 5c            	incw	x
 844  004a               L721:
 845  004a 1f01          	ldw	(OFST-1,sp),x
 848  004c 1303          	cpw	x,(OFST+1,sp)
 849  004e 25f3          	jrult	L321
 850                     ; 297 }
 853  0050 5b04          	addw	sp,#4
 854  0052 81            	ret	
 904                     ; 301 u8 Dsp_Write_buf(u8 *buf,u16 len)
 904                     ; 302 {
 905                     	switch	.text
 906  0053               _Dsp_Write_buf:
 908  0053 89            	pushw	x
 909  0054 88            	push	a
 910       00000001      OFST:	set	1
 913  0055 2019          	jra	L751
 914  0057               L551:
 915                     ; 311     for(i=0;i<4;i++)
 917  0057 0f01          	clr	(OFST+0,sp)
 918  0059               L361:
 919                     ; 313        SPI_DSP_SendByte(*buf);
 921  0059 1e02          	ldw	x,(OFST+1,sp)
 922  005b f6            	ld	a,(x)
 923  005c adc0          	call	_SPI_DSP_SendByte
 925                     ; 314        buf++; 
 927  005e 1e02          	ldw	x,(OFST+1,sp)
 928  0060 5c            	incw	x
 929  0061 1f02          	ldw	(OFST+1,sp),x
 930                     ; 311     for(i=0;i<4;i++)
 932  0063 0c01          	inc	(OFST+0,sp)
 935  0065 7b01          	ld	a,(OFST+0,sp)
 936  0067 a104          	cp	a,#4
 937  0069 25ee          	jrult	L361
 938                     ; 316     len--;
 940  006b 1e06          	ldw	x,(OFST+5,sp)
 941  006d 5a            	decw	x
 942  006e 1f06          	ldw	(OFST+5,sp),x
 943  0070               L751:
 944                     ; 309 while(len)
 946  0070 1e06          	ldw	x,(OFST+5,sp)
 947  0072 26e3          	jrne	L551
 948                     ; 320   return OK;
 950  0074 a601          	ld	a,#1
 953  0076 5b03          	addw	sp,#3
 954  0078 81            	ret	
 997                     ; 328 u8 uHAL_Akm7719_SPI_Write(u8 addr, u8 data)
 997                     ; 329 {
 998                     	switch	.text
 999  0079               _uHAL_Akm7719_SPI_Write:
1001  0079 89            	pushw	x
1002       00000000      OFST:	set	0
1005                     ; 330  SPI_DSP_CS(0);
1007  007a 4b01          	push	#1
1008  007c ae501e        	ldw	x,#20510
1009  007f cd0000        	call	_GPIO_WriteLow
1011  0082 84            	pop	a
1012                     ; 331  SPI_DSP_SendByte(addr);
1015  0083 7b01          	ld	a,(OFST+1,sp)
1016  0085 ad97          	call	_SPI_DSP_SendByte
1018                     ; 332  SPI_DSP_SendByte(data);
1020  0087 7b02          	ld	a,(OFST+2,sp)
1021  0089 ad93          	call	_SPI_DSP_SendByte
1023                     ; 333  SPI_DSP_CS(1);
1025  008b 4b01          	push	#1
1026  008d ae501e        	ldw	x,#20510
1027  0090 cd0000        	call	_GPIO_WriteHigh
1029  0093 84            	pop	a
1030                     ; 334 }
1034  0094 85            	popw	x
1035  0095 81            	ret	
1071                     ; 338 void vHAL_Akm7719_control_reg_init(void)
1071                     ; 339 {
1072                     	switch	.text
1073  0096               _vHAL_Akm7719_control_reg_init:
1075  0096 88            	push	a
1076       00000001      OFST:	set	1
1079                     ; 341   for(ii=0;ii<REG_SIZE;ii++)
1081  0097 4f            	clr	a
1082  0098 6b01          	ld	(OFST+0,sp),a
1083  009a               L322:
1084                     ; 343   	   uHAL_Akm7719_SPI_Write(akm_init_config_data[ii][0],akm_init_config_data[ii][1]);
1086  009a 5f            	clrw	x
1087  009b 97            	ld	xl,a
1088  009c 58            	sllw	x
1089  009d d60031        	ld	a,(_akm_init_config_data+1,x)
1090  00a0 97            	ld	xl,a
1091  00a1 7b01          	ld	a,(OFST+0,sp)
1092  00a3 905f          	clrw	y
1093  00a5 9097          	ld	yl,a
1094  00a7 9058          	sllw	y
1095  00a9 90d60030      	ld	a,(_akm_init_config_data,y)
1096  00ad 95            	ld	xh,a
1097  00ae adc9          	call	_uHAL_Akm7719_SPI_Write
1099                     ; 344 	   Wait_For_mSec(5);
1101  00b0 ae0005        	ldw	x,#5
1102  00b3 cd0000        	call	_Wait_For_mSec
1104                     ; 341   for(ii=0;ii<REG_SIZE;ii++)
1106  00b6 0c01          	inc	(OFST+0,sp)
1109  00b8 7b01          	ld	a,(OFST+0,sp)
1110  00ba a11d          	cp	a,#29
1111  00bc 25dc          	jrult	L322
1112                     ; 346 }
1115  00be 84            	pop	a
1116  00bf 81            	ret	
1168                     ; 351 u8 Dsp_WriteData(@far u8 *buf,u16 len)
1168                     ; 352 {
1169                     	switch	.text
1170  00c0               _Dsp_WriteData:
1172  00c0 89            	pushw	x
1173  00c1 3b0000        	push	c_x
1174  00c4 89            	pushw	x
1175       00000002      OFST:	set	2
1178                     ; 358   SPI_DSP_CS(0);
1180  00c5 4b01          	push	#1
1181  00c7 ae501e        	ldw	x,#20510
1182  00ca cd0000        	call	_GPIO_WriteLow
1184  00cd 5f            	clrw	x
1185  00ce 84            	pop	a
1186                     ; 360     for(i=0;i<len;i++)
1189  00cf 201b          	jra	L752
1190  00d1               L352:
1191                     ; 362        SPI_DSP_SendByte(*buf);
1193  00d1 7b03          	ld	a,(OFST+1,sp)
1194  00d3 b700          	ld	c_x,a
1195  00d5 1e04          	ldw	x,(OFST+2,sp)
1196  00d7 bf01          	ldw	c_x+1,x
1197  00d9 92bc0000      	ldf	a,[c_x.e]
1198  00dd cd001e        	call	_SPI_DSP_SendByte
1200                     ; 363        buf++;
1202  00e0 96            	ldw	x,sp
1203  00e1 1c0003        	addw	x,#OFST+1
1204  00e4 a601          	ld	a,#1
1205  00e6 cd0000        	call	c_pgadc
1207                     ; 360     for(i=0;i<len;i++)
1209  00e9 1e01          	ldw	x,(OFST-1,sp)
1210  00eb 5c            	incw	x
1211  00ec               L752:
1213  00ec 1f01          	ldw	(OFST-1,sp),x
1216  00ee 1308          	cpw	x,(OFST+6,sp)
1217  00f0 25df          	jrult	L352
1218                     ; 366   SPI_DSP_CS(1);
1220  00f2 4b01          	push	#1
1221  00f4 ae501e        	ldw	x,#20510
1222  00f7 cd0000        	call	_GPIO_WriteHigh
1224  00fa 84            	pop	a
1225                     ; 368   }
1229  00fb 5b05          	addw	sp,#5
1230  00fd 81            	ret	
1263                     ; 373 void  vAPP_Akm7719_Dsp_Init(void)
1263                     ; 374 {
1264                     	switch	.text
1265  00fe               _vAPP_Akm7719_Dsp_Init:
1269                     ; 376  DSP_RESET(0);
1271  00fe 4b08          	push	#8
1272  0100 ae5005        	ldw	x,#20485
1273  0103 cd0000        	call	_GPIO_WriteLow
1275  0106 ae0005        	ldw	x,#5
1276  0109 84            	pop	a
1277                     ; 377  Wait_For_mSec(5);
1279  010a cd0000        	call	_Wait_For_mSec
1281                     ; 378  DSP_RESET(1);
1283  010d 4b08          	push	#8
1284  010f ae5005        	ldw	x,#20485
1285  0112 cd0000        	call	_GPIO_WriteHigh
1287  0115 ae0032        	ldw	x,#50
1288  0118 84            	pop	a
1289                     ; 379  Wait_For_mSec(50);
1291  0119 cd0000        	call	_Wait_For_mSec
1293                     ; 383 SPI_DSP_CS(0);
1295  011c 4b01          	push	#1
1296  011e ae501e        	ldw	x,#20510
1297  0121 cd0000        	call	_GPIO_WriteLow
1299  0124 84            	pop	a
1300                     ; 384 SPI_DSP_SendByte(0xc1);
1303  0125 a6c1          	ld	a,#193
1304  0127 cd001e        	call	_SPI_DSP_SendByte
1306                     ; 385 SPI_DSP_SendByte(0x00);
1308  012a 4f            	clr	a
1309  012b cd001e        	call	_SPI_DSP_SendByte
1311                     ; 386 SPI_DSP_CS(1);
1313  012e 4b01          	push	#1
1314  0130 ae501e        	ldw	x,#20510
1315  0133 cd0000        	call	_GPIO_WriteHigh
1317  0136 ae000a        	ldw	x,#10
1318  0139 84            	pop	a
1319                     ; 388 Wait_For_mSec(10);
1322  013a cd0000        	call	_Wait_For_mSec
1324                     ; 389 SPI_DSP_CS(0);
1326  013d 4b01          	push	#1
1327  013f ae501e        	ldw	x,#20510
1328  0142 cd0000        	call	_GPIO_WriteLow
1330  0145 84            	pop	a
1331                     ; 390 SPI_DSP_SendByte(0xcf);
1334  0146 a6cf          	ld	a,#207
1335  0148 cd001e        	call	_SPI_DSP_SendByte
1337                     ; 391 SPI_DSP_SendByte(0x34);
1339  014b a634          	ld	a,#52
1340  014d cd001e        	call	_SPI_DSP_SendByte
1342                     ; 392 SPI_DSP_CS(1);
1344  0150 4b01          	push	#1
1345  0152 ae501e        	ldw	x,#20510
1346  0155 cd0000        	call	_GPIO_WriteHigh
1348  0158 ae000a        	ldw	x,#10
1349  015b 84            	pop	a
1350                     ; 393 Wait_For_mSec(10);
1353  015c cd0000        	call	_Wait_For_mSec
1355                     ; 395 SPI_DSP_CS(0);
1357  015f 4b01          	push	#1
1358  0161 ae501e        	ldw	x,#20510
1359  0164 cd0000        	call	_GPIO_WriteLow
1361  0167 84            	pop	a
1362                     ; 396 SPI_DSP_SendByte(0xcf);
1365  0168 a6cf          	ld	a,#207
1366  016a cd001e        	call	_SPI_DSP_SendByte
1368                     ; 397 SPI_DSP_SendByte(0x30);
1370  016d a630          	ld	a,#48
1371  016f cd001e        	call	_SPI_DSP_SendByte
1373                     ; 398 SPI_DSP_CS(1);
1375  0172 4b01          	push	#1
1376  0174 ae501e        	ldw	x,#20510
1377  0177 cd0000        	call	_GPIO_WriteHigh
1379  017a ae0005        	ldw	x,#5
1380  017d 84            	pop	a
1381                     ; 400 Wait_For_mSec(5);
1384  017e cd0000        	call	_Wait_For_mSec
1386                     ; 401 vHAL_Akm7719_control_reg_init();
1388  0181 cd0096        	call	_vHAL_Akm7719_control_reg_init
1390                     ; 404 Wait_For_mSec(5);
1392  0184 ae0005        	ldw	x,#5
1393  0187 cd0000        	call	_Wait_For_mSec
1395                     ; 405 Dsp_WriteData((@far u8*)ak77dspPRAM,_AK77XX_DSP_PRAM_BUF_SIZE);
1397  018a ae01b6        	ldw	x,#438
1398  018d 89            	pushw	x
1399  018e 35000000      	mov	c_x,#page(f_ak77dspPRAM)
1400  0192 ae0000        	ldw	x,#f_ak77dspPRAM
1401  0195 cd00c0        	call	_Dsp_WriteData
1403  0198 85            	popw	x
1404                     ; 406 Wait_For_mSec(5);
1406  0199 ae0005        	ldw	x,#5
1407  019c cd0000        	call	_Wait_For_mSec
1409                     ; 408 Dsp_WriteData((u8*)ak77dspCRAM,_AK77XX_DSP_CRAM_BUF_SIZE);
1411  019f ae002d        	ldw	x,#45
1412  01a2 89            	pushw	x
1413  01a3 35000000      	mov	c_x,#page(L3_ak77dspCRAM)
1414  01a7 ae0000        	ldw	x,#L3_ak77dspCRAM
1415  01aa cd00c0        	call	_Dsp_WriteData
1417  01ad 85            	popw	x
1418                     ; 409 Wait_For_mSec(5);
1420  01ae ae0005        	ldw	x,#5
1421  01b1 cd0000        	call	_Wait_For_mSec
1423                     ; 411 Dsp_WriteData((u8*)ak77dspORAM,_AK77XX_DSP_ORAM_BUF_SIZE);
1425  01b4 ae0003        	ldw	x,#3
1426  01b7 89            	pushw	x
1427  01b8 352d0000      	mov	c_x,#page(L5_ak77dspORAM)
1428  01bc ae002d        	ldw	x,#L5_ak77dspORAM
1429  01bf cd00c0        	call	_Dsp_WriteData
1431  01c2 85            	popw	x
1432                     ; 412  Wait_For_mSec(10);
1434  01c3 ae000a        	ldw	x,#10
1435  01c6 cd0000        	call	_Wait_For_mSec
1437                     ; 415 SPI_DSP_CS(0);
1439  01c9 4b01          	push	#1
1440  01cb ae501e        	ldw	x,#20510
1441  01ce cd0000        	call	_GPIO_WriteLow
1443  01d1 84            	pop	a
1444                     ; 416 SPI_DSP_SendByte(0xcf);
1447  01d2 a6cf          	ld	a,#207
1448  01d4 cd001e        	call	_SPI_DSP_SendByte
1450                     ; 417 SPI_DSP_SendByte(0x30);
1452  01d7 a630          	ld	a,#48
1453  01d9 cd001e        	call	_SPI_DSP_SendByte
1455                     ; 418 SPI_DSP_CS(1);
1457  01dc 4b01          	push	#1
1458  01de ae501e        	ldw	x,#20510
1459  01e1 cd0000        	call	_GPIO_WriteHigh
1461  01e4 ae0005        	ldw	x,#5
1462  01e7 84            	pop	a
1463                     ; 419 Wait_For_mSec(5);
1466  01e8 cd0000        	call	_Wait_For_mSec
1468                     ; 421 SPI_DSP_CS(0);
1470  01eb 4b01          	push	#1
1471  01ed ae501e        	ldw	x,#20510
1472  01f0 cd0000        	call	_GPIO_WriteLow
1474  01f3 84            	pop	a
1475                     ; 422 SPI_DSP_SendByte(0xc1);
1478  01f4 a6c1          	ld	a,#193
1479  01f6 cd001e        	call	_SPI_DSP_SendByte
1481                     ; 423 SPI_DSP_SendByte(0x01);
1483  01f9 a601          	ld	a,#1
1484  01fb cd001e        	call	_SPI_DSP_SendByte
1486                     ; 424 SPI_DSP_CS(1);
1488  01fe 4b01          	push	#1
1489  0200 ae501e        	ldw	x,#20510
1490  0203 cd0000        	call	_GPIO_WriteHigh
1492  0206 ae0005        	ldw	x,#5
1493  0209 84            	pop	a
1494                     ; 425 Wait_For_mSec(5);
1497  020a cd0000        	call	_Wait_For_mSec
1499                     ; 427 SPI_DSP_CS(0);
1501  020d 4b01          	push	#1
1502  020f ae501e        	ldw	x,#20510
1503  0212 cd0000        	call	_GPIO_WriteLow
1505  0215 84            	pop	a
1506                     ; 428 SPI_DSP_SendByte(0xcf);
1509  0216 a6cf          	ld	a,#207
1510  0218 cd001e        	call	_SPI_DSP_SendByte
1512                     ; 429 SPI_DSP_SendByte(0x38);
1514  021b a638          	ld	a,#56
1515  021d cd001e        	call	_SPI_DSP_SendByte
1517                     ; 430 SPI_DSP_CS(1);
1519  0220 4b01          	push	#1
1520  0222 ae501e        	ldw	x,#20510
1521  0225 cd0000        	call	_GPIO_WriteHigh
1523  0228 ae0005        	ldw	x,#5
1524  022b 84            	pop	a
1525                     ; 433 Wait_For_mSec(5);
1528  022c cd0000        	call	_Wait_For_mSec
1530                     ; 434 SPI_DSP_CS(0);
1532  022f 4b01          	push	#1
1533  0231 ae501e        	ldw	x,#20510
1534  0234 cd0000        	call	_GPIO_WriteLow
1536  0237 84            	pop	a
1537                     ; 435 SPI_DSP_SendByte(0xcf);
1540  0238 a6cf          	ld	a,#207
1541  023a cd001e        	call	_SPI_DSP_SendByte
1543                     ; 436 SPI_DSP_SendByte(0x3c);
1545  023d a63c          	ld	a,#60
1546  023f cd001e        	call	_SPI_DSP_SendByte
1548                     ; 437 SPI_DSP_CS(1);
1550  0242 4b01          	push	#1
1551  0244 ae501e        	ldw	x,#20510
1552  0247 cd0000        	call	_GPIO_WriteHigh
1554  024a ae0258        	ldw	x,#600
1555  024d 84            	pop	a
1556                     ; 438 Wait_For_mSec(600);
1560                     ; 441 }
1563  024e cc0000        	jp	_Wait_For_mSec
1607                     ; 445 u8 uHAL_Akm7719_SPI_Write_VOL(u8 addr, unsigned long cmd_data)
1607                     ; 446 {
1608                     	switch	.text
1609  0251               _uHAL_Akm7719_SPI_Write_VOL:
1611  0251 88            	push	a
1612       00000000      OFST:	set	0
1615                     ; 447   SPI_DSP_CS(0);
1617  0252 4b01          	push	#1
1618  0254 ae501e        	ldw	x,#20510
1619  0257 cd0000        	call	_GPIO_WriteLow
1621  025a 84            	pop	a
1622                     ; 448   SPI_DSP_SendByte(0X80);
1625  025b a680          	ld	a,#128
1626  025d cd001e        	call	_SPI_DSP_SendByte
1628                     ; 449   SPI_DSP_SendByte(0X00);
1630  0260 4f            	clr	a
1631  0261 cd001e        	call	_SPI_DSP_SendByte
1633                     ; 450   SPI_DSP_SendByte(0X00);
1635  0264 4f            	clr	a
1636  0265 cd001e        	call	_SPI_DSP_SendByte
1638                     ; 452 SPI_DSP_SendByte((unsigned char)( cmd_data>>16));
1640  0268 7b05          	ld	a,(OFST+5,sp)
1641  026a cd001e        	call	_SPI_DSP_SendByte
1643                     ; 453 SPI_DSP_SendByte((unsigned char)( cmd_data>>8));
1645  026d 7b06          	ld	a,(OFST+6,sp)
1646  026f cd001e        	call	_SPI_DSP_SendByte
1648                     ; 454 SPI_DSP_SendByte((unsigned char)cmd_data);
1650  0272 7b07          	ld	a,(OFST+7,sp)
1651  0274 cd001e        	call	_SPI_DSP_SendByte
1653                     ; 455 SPI_DSP_CS(1);
1655  0277 4b01          	push	#1
1656  0279 ae501e        	ldw	x,#20510
1657  027c cd0000        	call	_GPIO_WriteHigh
1659  027f ae0002        	ldw	x,#2
1660  0282 84            	pop	a
1661                     ; 456 Wait_For_mSec(2);
1664  0283 cd0000        	call	_Wait_For_mSec
1666                     ; 458 SPI_DSP_CS(0);
1668  0286 4b01          	push	#1
1669  0288 ae501e        	ldw	x,#20510
1670  028b cd0000        	call	_GPIO_WriteLow
1672  028e 84            	pop	a
1673                     ; 459 SPI_DSP_SendByte(0Xa4);
1676  028f a6a4          	ld	a,#164
1677  0291 cd001e        	call	_SPI_DSP_SendByte
1679                     ; 460 SPI_DSP_SendByte(0X00);
1681  0294 4f            	clr	a
1682  0295 cd001e        	call	_SPI_DSP_SendByte
1684                     ; 461 SPI_DSP_SendByte(0X00);
1686  0298 4f            	clr	a
1687  0299 cd001e        	call	_SPI_DSP_SendByte
1689                     ; 464   SPI_DSP_CS(1);
1691  029c 4b01          	push	#1
1692  029e ae501e        	ldw	x,#20510
1693  02a1 cd0000        	call	_GPIO_WriteHigh
1695  02a4 84            	pop	a
1696                     ; 465 }
1700  02a5 84            	pop	a
1701  02a6 81            	ret	
1738                     	xdef	_Dsp_WriteData
1739                     	xdef	_Dsp_Write_buf
1740                     	xdef	_Dsp_Send_N_FF
1741                     	xdef	_SPI_DSP_ReadByte
1742                     	xdef	f_ak77dspPRAM
1743                     	xdef	_akm_init_config_data
1744                     	xref	_SPI_GetFlagStatus
1745                     	xref	_SPI_ReceiveData
1746                     	xref	_SPI_SendData
1747                     	xref	_SPI_Cmd
1748                     	xref	_SPI_Init
1749                     	xref	_SPI_DeInit
1750                     	xdef	_uHAL_Akm7719_SPI_Write_VOL
1751                     	xdef	_SPI_DSP_SendByte
1752                     	xdef	_SPI_DSP_Init
1753                     	xdef	_uHAL_Akm7719_SPI_Write
1754                     	xdef	_vHAL_Akm7719_control_reg_init
1755                     	xdef	_vAPP_Akm7719_Dsp_Init
1756                     	xref	_Wait_For_mSec
1757                     	xref	_GPIO_WriteLow
1758                     	xref	_GPIO_WriteHigh
1759                     	xref.b	c_x
1778                     	xref	c_pgadc
1779                     	end
